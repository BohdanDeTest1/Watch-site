/* ProfilePromotions.css
   Promotions UI styles — теперь Promotions использует те же классы/разметку, что LiveOps.
   Поэтому тут оставляем только минимальные scoped-добавки (если нужно).
*/

/* Никаких pp-promos-cal / pp-promos__table — всё идёт через .tl-* и .pp-t* (как в LiveOps) */

/* Мелкая правка: чтобы Promotions-секция не “прилипала” к предыдущей */
#pp-root #ppPromoCal {
    margin-top: 6px;
}

#pp-root #ppPromoCal {
    margin-top: 6px;
}

/* [FIX] Promotions table: allow filter popups to overflow outside table bounds (same behavior as LiveOps)
   + draw proper rounded corners (border) without clipping popups */

/* [FIX] Promotions table: allow filter popups to overflow outside table bounds (same behavior as LiveOps)
   + draw proper rounded corners (border) without clipping popups */
#pp-root #ppPromoLoTable.pp-table {
    overflow: visible;
    /* попапы фильтров не клипаем */
    position: relative;
    /* якорь для ::before */
    background: var(--card);
    border: 0;
    /* рамку рисуем через ::before */
    border-radius: 12px;
    /* ВСЕ углы у таблицы */
}

/* “Рамка” таблицы поверх контента — чтобы углы всегда были дорисованы */
#pp-root #ppPromoLoTable.pp-table::before {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 20;

    border: 1px solid var(--border);
    /* замыкаем рамку снизу */
    border-radius: 12px;
    /* ВСЕ углы */
}


/* header остаётся кликабельным и попапы не режутся */
#pp-root #ppPromoLoTable .pp-t-head {
    overflow: visible;
    position: relative;
    z-index: 5;
    /* держим шапку выше строк, чтобы попап был кликабельный */
}



/* [FIX] Promotions: синяя линия Picked (которую двигаем) должна быть поверх баров.
   В базовом CSS у .tl-picked z-index: 4, а у промо-баров z-index: 6 — поэтому линия "под" барами. */
#ppPromoCal .tl-picked {
    z-index: 25 !important;
    /* выше баров */
}

/* страховка: если линия/оверлей приходит с другим классом */
#ppPromoCal .pp-cal-picked,
#ppPromoCal .pp-picked-line {
    z-index: 25 !important;
}



#pp-root .pp-promos {
    display: grid;
    gap: 14px;
}

/* --- calendar --- */
#pp-root .pp-promos-cal {
    border: 1px solid var(--border);
    border-radius: 10px;
    background: var(--card);
    padding: 12px;
}

#pp-root .pp-promos-cal__top {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 10px;
}

#pp-root .pp-promos-cal__grid {
    display: grid;
    grid-template-columns: 220px 1fr;
    gap: 12px;
}

#pp-root .pp-promos-cal__left {
    border: 1px solid var(--border);
    border-radius: 10px;
    overflow: hidden;
    background: var(--card);
}

#pp-root .pp-promos-cal__left-head {
    padding: 10px 12px;
    font-weight: 700;
    border-bottom: 1px solid var(--border);
    background: var(--card);
}

#pp-root .pp-promos-cal__left-body {
    max-height: 260px;
    overflow: auto;
}

#pp-root .pp-promos-cal__left-row {
    padding: 10px 12px;
    border-bottom: 1px solid rgba(127, 127, 127, .15);
    font-size: 13px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

#pp-root .pp-promos-cal__right {
    border: 1px solid var(--border);
    border-radius: 10px;
    overflow: hidden;
    background: var(--card);
}

#pp-root .pp-promos-cal__hours {
    display: grid;
    grid-template-columns: repeat(24, minmax(60px, 1fr));
    border-bottom: 1px solid var(--border);
    background: var(--card);
}

#pp-root .pp-promos-cal__hour {
    padding: 10px 6px;
    font-size: 12px;
    color: var(--muted);
    border-right: 1px solid rgba(127, 127, 127, .15);
    text-align: center;
}

#pp-root .pp-promos-cal__rows {
    display: grid;
    grid-auto-rows: 44px;
}

#pp-root .pp-promos-cal__row {
    position: relative;
    border-bottom: 1px solid rgba(127, 127, 127, .15);
    background-image: repeating-linear-gradient(to right,
            rgba(127, 127, 127, .10) 0,
            rgba(127, 127, 127, .10) 1px,
            transparent 1px,
            transparent calc(100% / 24));
}

#pp-root .pp-promos-cal__bar {
    position: absolute;
    top: 7px;
    height: 30px;
    border-radius: 8px;
    background: linear-gradient(to bottom, rgba(99, 102, 241, .95), rgba(79, 70, 229, .95));
    border: 1px solid rgba(0, 0, 0, .12);
    box-shadow: 0 8px 16px rgba(0, 0, 0, .18);
    overflow: hidden;
    cursor: default;
}

#pp-root .pp-promos-cal__bar .txt {
    display: block;
    padding: 6px 10px;
    font-size: 12px;
    color: #fff;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* --- tooltip --- */
.pp-promos-tip {
    position: fixed;
    z-index: 999999;
    min-width: 260px;
    max-width: 360px;
    border: 1px solid var(--border);
    border-radius: 10px;
    background: var(--card);
    color: var(--text);
    box-shadow: 0 14px 34px rgba(0, 0, 0, .45);
    padding: 10px 12px;
}

/* --- Promotions Info panel tweaks (match LiveOps look) --- */
#pp-root #ppPromoLoDetail .pp-state {
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

/* --- Promotions detail: nested blocks (offers / progress / assets) --- */
#pp-root #ppPromoLoDetail .pp-block {
    display: grid;
    gap: 10px;
    margin-top: 6px;
}

/* --- [PROMOS] KV stacked layout: title on its own row, value below (full width) --- */
#pp-root #ppPromoLoDetail .pp-kv.pp-kv-stack {
    grid-template-columns: 1fr;
    gap: 6px;
    align-items: start;
}

#pp-root #ppPromoLoDetail .pp-kv.pp-kv-stack .pp-k {
    grid-column: 1 / -1;
    margin-top: 4px;
}

#pp-root #ppPromoLoDetail .pp-kv.pp-kv-stack .pp-v {
    grid-column: 1 / -1;
    display: block;
    margin-top: 2px;
}

/* --- [PROMOS] Assets value should look like normal right-column values (2 lines) --- */
#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-assets-inline {
    display: grid;
    gap: 8px;
    width: 100%;
    min-width: 0;
}

/* каждая строка (PopUp assets / Icon assets) выглядит как обычное значение */
#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-assets-inline .pp-asset-toggle {
    appearance: none;
    border: 0;
    background: transparent;
    padding: 0;
    margin: 0;

    display: inline-flex;
    align-items: center;
    gap: 8px;

    font-weight: 800;
    color: var(--text);
    cursor: pointer;
    user-select: none;
}

/* единственный треугольник берём из DOM: .pp-asset-toggle-chev */
#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-assets-inline .pp-asset-toggle-chev {
    font-size: 12px;
    opacity: .8;
    transform: translateY(1px);
}

/* раскрытая панель — остаётся под своей строкой и на всю ширину value-колонки */
#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-assets-inline .pp-asset-panel {
    width: 100%;
    min-width: 0;
}



/* чуть “опускаем” сами блоки Offers/Assets внутри значения */
#pp-root #ppPromoLoDetail .pp-kv.pp-kv-stack .pp-offers,
#pp-root #ppPromoLoDetail .pp-kv.pp-kv-stack .pp-assets2 {
    margin-top: 6px;
}


#pp-root #ppPromoLoDetail .pp-offer,
#pp-root #ppPromoLoDetail .pp-mission {
    border: 1px solid rgba(127, 127, 127, .18);
    border-radius: 10px;
    padding: 10px 10px;
    background: rgba(127, 127, 127, .06);
}

#pp-root #ppPromoLoDetail .pp-offer-head {
    font-weight: 800;
    margin-bottom: 6px;
    display: inline-flex;
    gap: 8px;
    align-items: baseline;
}

#pp-root #ppPromoLoDetail .pp-offer-row {
    margin: 4px 0;
    word-break: break-word;
}

#pp-root #ppPromoLoDetail .pp-rew-list .row,
#pp-root #ppPromoLoDetail .pp-assets .row {
    margin: 4px 0;
    white-space: pre-wrap;
    word-break: break-word;
}

#pp-root #ppPromoLoDetail .pp-asset-lines {
    margin-top: 4px;
    display: grid;
    gap: 4px;
}


/* --- [FIX] Promotions open-state: у промо НЕТ .pp-item, поэтому цепляемся к #ppPromoLiveops.info-open --- */
#ppPromoLiveops.info-open {
    /* как .pp-item.info-open -> сдвигаем контент, освобождая место под правую панель */
    padding-right: calc(var(--pp-detail-w) + var(--pp-gap));
}

/* --- [UI] Detail panel bounds: no horizontal scroll, and content should not go behind the Admin button --- */
#ppPromoLiveops {
    position: relative;
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail {
    overflow-x: hidden;

    /* панель тянется до низа, а кнопка "PromotionInTheAdmin" лежит поверх,
       поэтому делаем внутренний отступ под кнопку, чтобы контент не заезжал под неё */
    padding-bottom: calc(var(--pp-admin-h) + 24px);
}


/* --- [UI] Floating close button: keep fully visible and clickable --- */
#ppPromoLiveops #ppPromoLoClose.pp-close-float {
    position: absolute;
    top: 10px;
    right: 0px;

    /* ВАЖНО: ProfileParser.css задаёт .pp-close-float { display:none; }.
       Поэтому здесь делаем override жёстко. */
    display: none !important;

    z-index: 1215;
    /* выше панели */
    width: 30px;
    height: 30px;
    border-radius: 10px;
    font-size: 22px;
    line-height: 24px;

    align-items: center;
    justify-content: center;
}

#ppPromoLiveops.info-open #ppPromoLoClose.pp-close-float {
    display: inline-flex !important;
}


/* --- [UI] Floating Admin button: pinned to the bottom of the info-panel area --- */

/* --- [UI] Floating Admin button: EXACTLY like LiveOps .pp-admin-float --- */
#ppPromoLiveops #ppPromoAdminBtn.pp-admin-float {
    position: absolute;
    right: 11px;
    bottom: 0px;
    z-index: 1210;

    display: none;
    /* показываем только когда открыта инфо-панель */

    width: calc(var(--pp-detail-w) - 16px);
    height: var(--pp-admin-h);

    align-items: center;
    justify-content: center;
}

/* show only when panel is open */
#ppPromoLiveops.info-open #ppPromoAdminBtn.pp-admin-float {
    display: inline-flex !important;
}

/* HARD RULE: on PROD env admin button must not exist (override any info-open rules) */
:root[data-pp-env="prod"] #ppPromoAdminBtn,
:root[data-pp-env="prod"] #ppPromoAdminBtn.pp-admin-float,
:root[data-pp-env="prod"] #ppPromoLiveops.info-open #ppPromoAdminBtn.pp-admin-float {
    display: none !important;
}




#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail {
    position: absolute;
    right: 0;
    top: 15px;
    /* верх панели = верх таблицы */
    bottom: 0;
    /* важно: теперь панель ДО НИЗА, включая область под кнопкой */
    width: var(--pp-detail-w);

    /* ВАЖНО: нижний padding = safe area под фиксированной кнопкой */
    padding: 0 16px calc(var(--pp-admin-h) + 24px) 9px;

    pointer-events: auto;
    opacity: 1;

    overflow-y: auto;
    overflow-x: hidden;
    scrollbar-gutter: stable;
}




#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kvs {
    padding-bottom: calc(var(--pp-admin-h) + 24px);
    /* запас под кнопку + отступ */
}


/* принудительно переносим длинные пути/значения */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-v,
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail code,
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail pre {
    overflow-wrap: anywhere;
    word-break: break-word;
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail pre.pp-raw {
    white-space: pre-wrap;
    /* raw больше не ломает ширину */
    overflow-x: hidden;
}

/* ===== Assets accordion: buttons "in the air" + panel under each button ===== */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-assets-acc {
    display: grid;
    gap: 10px;
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-asset-acc {
    display: grid;
    gap: 8px;
}

/* Button without background/border (like a value text), but clickable */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-asset-toggle {
    all: unset;
    display: inline-flex;
    align-items: center;
    gap: 8px;

    font-weight: 800;
    cursor: pointer;
    user-select: none;
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-asset-toggle:hover {
    opacity: .85;
}



/* Panel should be full-width inside the info panel */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-asset-panel {
    width: 100%;
}

/* Cards already exist; make sure they use full width */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-asset2 {
    width: 100%;
}



/* внутри панелей используем уже существующие стили .pp-asset2 (карточки) */


/* --- Assets layout: name -> lines under it (Android/iOS) --- */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-assets2 {
    display: grid;
    gap: 10px;
    margin-top: 4px;
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-asset2 {
    border: 1px solid rgba(127, 127, 127, .18);
    border-radius: 10px;
    padding: 10px;
    background: rgba(127, 127, 127, .06);
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-asset2-name {
    font-weight: 800;
    margin-bottom: 6px;
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-asset2-lines {
    display: grid;
    gap: 6px;
}

/* --- [PROMOS] Assets KV: button in RIGHT column, panel under its button, panel spans FULL width --- */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-assets {
    align-items: flex-start;
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-assets .pp-asset-toggle-row {
    grid-column: 2 / 3;
    justify-self: start;

    appearance: none;
    border: 0;
    background: transparent;
    padding: 0;

    /* CLOSED state (default): tighter like a list */
    margin-top: 4px;
    margin-bottom: 6px;

    display: inline-flex;
    align-items: center;
    gap: 8px;

    font-weight: 800;
    color: var(--text);
    cursor: pointer;
    user-select: none;
}

/* First toggle (PopUp) sits a bit lower than the left "Assets" label */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-assets .pp-asset-toggle-row:first-of-type {
    margin-top: 10px;
}

/* OPEN state: title closer to its own block (reduce bottom gap) */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-assets .pp-asset-toggle-row[aria-expanded="true"] {
    margin-bottom: 2px;
}




#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-assets .pp-asset-toggle-row:hover {
    opacity: .9;
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-assets .pp-asset-panel {
    grid-column: 1 / -1;
    width: 100%;
    min-width: 0;

    /* OPEN: block should appear right under its title */
    margin-top: 8px;
    margin-bottom: 10px;
}

/* When a panel is open and the next thing is another toggle (Icon),
   push that next toggle down a bit to separate visually from the block above */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-assets .pp-asset-panel:not([hidden])+.pp-asset-toggle-row {
    margin-top: 14px;
    /* <-- это и даст "Icon assets ниже от popup-блока" */
}


/* ===== Offers accordion: exactly like Assets (buttons on right, panel full width) ===== */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-offers {
    align-items: flex-start;
}

/* Offer toggle row sits in the RIGHT value column */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-offers .pp-offer-toggle-row {
    grid-column: 2 / 3;
    justify-self: start;

    appearance: none;
    border: 0;
    background: transparent;
    padding: 0;

    /* CLOSED state: tight list */
    margin-top: 4px;
    margin-bottom: 6px;

    display: inline-flex;
    align-items: center;
    gap: 8px;

    font-weight: 800;
    color: var(--text);
    cursor: pointer;
    user-select: none;
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-offers .pp-offer-toggle-row:hover {
    opacity: .9;
}

/* OPEN state: title closer to its own block */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-offers .pp-offer-toggle-row[aria-expanded="true"] {
    margin-bottom: 2px;
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-offers .pp-offer-toggle-chev {
    font-size: 12px;
    opacity: .8;
    transform: translateY(1px);
}

/* Panel should span FULL width of the info panel content */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-offers .pp-offer-panel {
    grid-column: 1 / -1;
    width: 100%;
    min-width: 0;

    margin-top: 8px;
    margin-bottom: 10px;
}

/* If a panel is open and next is another offer toggle, add separation (like assets) */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-offers .pp-offer-panel:not([hidden])+.pp-offer-toggle-row {
    margin-top: 14px;
}

/* Offer card inside accordion: keep full width */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-offer-card.pp-offer-card-acc {
    width: 100%;
    min-width: 0;
}

/* No Offer title inside the card (we don't render it in JS, but keep safe) */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-offer-card.pp-offer-card-acc .pp-offer-title {
    display: none;
}


#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-assets-acc {
    display: grid;
    gap: 10px;
    width: 100%;
    margin-top: 2px;
}

/* “Кнопки в воздухе”: без фона/обводки, но кликабельные + pointer */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-asset-toggle {
    appearance: none;
    border: 0;
    background: transparent;
    padding: 0;
    margin: 0;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-weight: 800;
    color: var(--text);
    cursor: pointer;
    user-select: none;
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-asset-toggle:hover {
    opacity: .9;
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-asset-toggle-chev {
    font-size: 12px;
    opacity: .8;
    transform: translateY(1px);
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-asset-panel {
    width: 100%;
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-asset-panel .pp-assets2,
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-asset-panel .pp-asset2 {
    width: 100%;
}


/* Raw summary — как аккуратный “спойлер” */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-raw-details summary {
    cursor: pointer;
    user-select: none;
    margin-top: 6px;
}


/* чтобы текст/контент не “лип” к правой границе (как у LiveOps) */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kvs {
    padding-right: 16px;
}

/* как в LiveOps: таблица сдвигается влево, когда открыта панель */
#ppPromoLiveops.info-open #ppPromoLoTable {
    margin-right: calc(var(--pp-detail-w) + var(--pp-gap));
}

/* показываем плавающие кнопки только в open-state (как .pp-item.info-open ...) */
#ppPromoLiveops.info-open .pp-close-float {
    display: inline-flex;
    color: var(--text);
}

#ppPromoLiveops.info-open .pp-admin-float {
    display: inline-flex;
}

/* кнопка поверх контента, с “непрозрачной” подложкой */
#ppPromoLiveops.info-open #ppPromoAdminBtn.pp-admin-float {
    z-index: 1210 !important;
    /* MUST be above the detail panel */

    pointer-events: auto;
}





/* [FIX] Добавляем внутренний right padding контенту, чтобы текст не “прилипал” к правой границе */
.pp-item.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kvs {
    padding-right: 16px;
}

/* --- [FIX] Ensure copy icon is not accidentally collapsed by any other rules --- */
#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-ico {
    display: inline-grid !important;
    visibility: visible !important;
    opacity: 1 !important;
}


/* --- Name row: PIN copy button like LiveOps, but bulletproof (absolute right) --- */
#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-kv-name .pp-v {
    position: relative;
    display: block;
    /* важнее, чем flex: мы якорим кнопку абсолютом */
    min-width: 0;
    padding-right: 34px;
    /* место под кнопку 26px + небольшой зазор */
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-kv-name .pp-name-text {
    display: block;
    min-width: 0;
    white-space: normal !important;
    overflow-wrap: anywhere;
    word-break: break-word;
}

/* сама кнопка всегда в правом верхнем углу value-колонки */
#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-kv-name .pp-ico {
    position: absolute;
    right: 0;
    top: 0;
    margin-left: 0;
    /* убираем auto, чтобы не влиял flex */
    z-index: 3;
}


/* Copy icon button (same as LiveOps Info panel) */
#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-ico {
    all: unset;
    position: relative;
    display: inline-grid;
    place-items: center;
    width: 26px;
    height: 26px;
    border-radius: 6px;
    border: 1px solid var(--border, #d1d5db);
    background: var(--btn-n-field-bg, #fff);
    color: var(--text);
    cursor: pointer;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-ico svg {
    display: block;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-ico:hover {
    opacity: .92;
    filter: brightness(0.98);
}


/* Tooltip for copy icon (light theme) */
#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-ico[data-hint]:hover::after {
    content: attr(data-hint);
    position: absolute;
    top: calc(100% + 6px);
    right: 0;
    padding: 4px 6px;
    font-size: 11px;
    border-radius: 6px;
    border: 1px solid var(--border, #d1d5db);
    background: #ffffff;
    color: #111827;
    white-space: nowrap;
    box-shadow: 0 8px 20px rgba(0, 0, 0, .15);
    z-index: 1;
}

/* Tooltip for copy icon (dark theme) */
:root.theme-dark #pp-root #ppPromoLoDetail.pp-liveops-detail .pp-ico[data-hint]:hover::after,
.theme-dark #pp-root #ppPromoLoDetail.pp-liveops-detail .pp-ico[data-hint]:hover::after,
[data-theme="dark"] #pp-root #ppPromoLoDetail.pp-liveops-detail .pp-ico[data-hint]:hover::after,
.dark #pp-root #ppPromoLoDetail.pp-liveops-detail .pp-ico[data-hint]:hover::after {
    background: #0f172a;
    color: #e5e7eb;
    border-color: rgba(148, 163, 184, .35);
}


/* green check similar to LiveOps table */
#pp-root #ppPromoLoDetail .pp-state .pp-check {
    width: 18px;
    height: 18px;
    border-radius: 999px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    line-height: 1;
    background: #22c55e;
    color: #fff;
}

/* Ensure Promotions Info panel admin button:
   Light theme -> WHITE text
   Dark theme  -> BLACK text */
#pp-root #ppPromoAdminBtn.pp-btn {
    background: var(--accent);
    color: #ffffff;
    /* Light: white text */
    border: 1px solid rgba(0, 0, 0, .08);
}

/* Dark theme: black text (as you want) */
:root.theme-dark #pp-root #ppPromoAdminBtn.pp-btn,
.theme-dark #pp-root #ppPromoAdminBtn.pp-btn,
[data-theme="dark"] #pp-root #ppPromoAdminBtn.pp-btn,
.dark #pp-root #ppPromoAdminBtn.pp-btn {
    color: #0f172a !important;
}

/* [FIX] Promo Admin button hover:
   НЕ делаем opacity (иначе выглядит “прозрачной” на фоне панели),
   а делаем лёгкое затемнение как у Events in Admin. */
#pp-root #ppPromoAdminBtn.pp-btn:hover {
    opacity: 1;
    /* перебиваем любые общие hover-правила */
    filter: brightness(0.86);
    /* лёгкое затемнение вместо прозрачности */
}

/* на всякий случай — когда кнопку “нажимают” */
#pp-root #ppPromoAdminBtn.pp-btn:active {
    opacity: 1;
    filter: brightness(0.88);
}


/* ===== Promotions info panel: prevent horizontal scroll + stable width (no shift on Raw open) ===== */
#pp-root #ppPromoLoDetail.pp-liveops-detail {
    overflow-y: auto;
    overflow-x: hidden;
    /* место под нижнюю кнопку Promotions in Admin, чтобы текст не “уезжал” под неё */
    padding-bottom: 78px;
    /* не даём контенту “прыгать” по ширине при появлении/исчезновении скролла */
    scrollbar-gutter: stable;
}

/* close button must always be clickable above Raw/pre */
#ppPromoLiveops .pp-close-float {
    z-index: 20;
    pointer-events: auto;
}

/* Common code style inside panel */
#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-code {
    white-space: normal;
    overflow-wrap: anywhere;
    word-break: break-word;
}

/* ===== Assets block (popup/icon titles: bigger + grey + spacing between groups) ===== */
#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-assets2 {
    display: grid;
    gap: 12px;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-asset2 {
    border: 1px solid var(--border, #d1d5db);
    border-radius: 10px;
    padding: 10px 10px;
    background: rgba(0, 0, 0, 0.02);
}

:root.theme-dark #pp-root #ppPromoLoDetail.pp-liveops-detail .pp-asset2,
.theme-dark #pp-root #ppPromoLoDetail.pp-liveops-detail .pp-asset2,
[data-theme="dark"] #pp-root #ppPromoLoDetail.pp-liveops-detail .pp-asset2,
.dark #pp-root #ppPromoLoDetail.pp-liveops-detail .pp-asset2 {
    background: rgba(255, 255, 255, 0.04);
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-asset2-name {
    font-size: 14px;
    font-weight: 800;
    color: var(--muted, #6b7280);
    /* серенький popup/icon */
    margin-bottom: 8px;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-asset2-lines {
    display: grid;
    gap: 6px;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-asset2-line {
    min-width: 0;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-asset2-k {
    color: var(--muted, #6b7280);
    font-weight: 700;
    margin-right: 6px;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-asset2-code {
    white-space: normal;
    overflow-wrap: anywhere;
    word-break: break-word;
}


/* ===== Segment + collapsible subsegment ===== */
#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-seg-wrap {
    display: grid;
    gap: 8px;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-subseg {
    border: 1px dashed var(--border, #d1d5db);
    border-radius: 10px;
    padding: 8px 10px;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-subseg-sum {
    cursor: pointer;
    color: var(--muted, #6b7280);
    font-weight: 700;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-subseg-val {
    margin-top: 8px;
}

/* ===== Offers cards + rewards rows (no mid-word breaks) ===== */
#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-offers {
    display: grid;
    gap: 12px;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-offer-card {
    border: 1px solid var(--border, #d1d5db);
    border-radius: 12px;
    padding: 10px 12px;
    background: rgba(0, 0, 0, 0.02);
    min-width: 0;
}

:root.theme-dark #pp-root #ppPromoLoDetail.pp-liveops-detail .pp-offer-card,
.theme-dark #pp-root #ppPromoLoDetail.pp-liveops-detail .pp-offer-card,
[data-theme="dark"] #pp-root #ppPromoLoDetail.pp-liveops-detail .pp-offer-card,
.dark #pp-root #ppPromoLoDetail.pp-liveops-detail .pp-offer-card {
    background: rgba(255, 255, 255, 0.04);
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-offer-title {
    font-weight: 900;
    margin-bottom: 8px;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-offer-row {
    display: grid;
    grid-template-columns: 70px 1fr;
    gap: 10px;
    margin-top: 6px;
    align-items: start;
    min-width: 0;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-offer-k {
    color: var(--muted, #6b7280);
    font-weight: 800;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-offer-v {
    min-width: 0;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-rews {
    display: grid;
    gap: 8px;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-rew-row {
    display: grid;
    gap: 4px;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-rew-main {
    min-width: 0;
    white-space: normal;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-rew-name {
    /* ключевое: запретить “разрез” слова по буквам */
    white-space: nowrap;
    overflow-wrap: normal;
    word-break: normal;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-colon {
    margin: 0 6px 0 6px;
    color: var(--muted, #6b7280);
    font-weight: 900;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-rew-meta {
    padding-left: 18px;
    /* визуально показывает, что type относится к реварду выше */
    color: var(--muted, #6b7280);
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-rew-meta-k {
    font-weight: 800;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-free {
    color: var(--muted, #6b7280);
    font-weight: 800;
}


.pp-promos-tip__t {
    font-weight: 800;
    margin-bottom: 6px;
}

.pp-promos-tip__r {
    display: grid;
    grid-template-columns: 52px 1fr;
    gap: 10px;
    font-size: 12px;
    line-height: 1.3;
    margin-top: 4px;
}

.pp-promos-tip__r .k {
    color: var(--muted);
}

.pp-promos-tip__r .v {
    word-break: break-word;
}

/* --- table --- */
#pp-root .pp-promos__table-head,
#pp-root .pp-promos__row {
    display: grid;
    grid-template-columns: 2fr 1.2fr 1.3fr 1.3fr;
    gap: 10px;
    align-items: center;
}

#pp-root .pp-promos__table-head {
    padding: 10px 12px;
    border: 1px solid var(--border);
    border-radius: 10px;
    background: var(--card);
    font-weight: 700;
}

#pp-root .pp-promos__table-body {
    border: 1px solid var(--border);
    border-radius: 10px;
    overflow: hidden;
    background: var(--card);
}

#pp-root .pp-promos__row {
    padding: 10px 12px;
    border-bottom: 1px solid rgba(127, 127, 127, .15);
}

#pp-root .pp-promos__row:last-child {
    border-bottom: 0;
}

#pp-root .pp-promos__cell {
    font-size: 13px;
}

#pp-root .pp-promos__cell.name {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Липкое название внутри промо-бара — делаем “как LiveOps”, но sticky-эффект будет
   реализован JS’ом через transform (см. ProfilePromotions.js).
   Так мы не зависим от того, как таймлайн двигает контент (scroll/transform/перерисовки). */

/* Не трогаем глобально .pp-cal-bar .txt — только в Promotions */
#ppPromoCal .tl-event,
#ppPromoCal .pp-cal-bar {
    isolation: isolate;
    z-index: 6;
}

/* ВАЖНО: чтобы текст отсекался по правому краю бара */
#ppPromoCal .tl-event,
#ppPromoCal .pp-cal-bar {
    overflow: hidden !important;
}

/* Базовый вид текста (а “липкость” даст JS через translateX) */
#ppPromoCal .tl-event .txt,
#ppPromoCal .pp-cal-bar .txt {
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;

    color: #fff !important;
    -webkit-text-fill-color: #fff !important;

    position: absolute !important;
    left: 0;
    top: 0;
    bottom: 0;
    z-index: 10;

    padding: 0 8px;
    line-height: inherit;

    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;

    pointer-events: none;

    /* transform будет проставляться JS’ом (ручная sticky-логика) */
    transform: translateX(0px);
    will-change: transform;
}

#ppPromoCal .tl-res-header {
    height: 133px;
}

/* [FIX] Promotions: picked-pin (badge + round button) должен быть поверх баров.
   Сейчас бары (#ppPromoCal .tl-event/.pp-cal-bar) имеют высокий z-index и перекрывают header.
   Поднимаем слой header + верхней шкалы. */
#ppPromoCal .tl-grid-header {
    position: sticky !important;
    top: 0;
    z-index: 60 !important;
    /* выше баров (у них z-index:6) */
    overflow: visible !important;
    /* чтобы кругляш/бейдж не клипались */
}

/* страховка: верхняя шкала часов — тоже на верхнем слое */
#ppPromoCal .pp-cal-scale.top {
    position: relative;
    z-index: 61;
    overflow: visible;

}

/* ===========================
   Promotions table: pager = 1-в-1 как LiveEvents
   =========================== */
/* [FIX] Promotions pager: make bottom corners rounded and match table border
   (border is drawn via ::before to avoid corner “gaps”) */


/* ===========================
   Promotions table: pager should be OUTSIDE the table frame (like LiveOps)
   =========================== */

#ppPromoPager #ppPromoRange {
    min-width: 120px;
}

/* Пейджер НЕ является частью рамки таблицы: убираем border-обвязку и даём отступ */
#pp-root #ppPromoPager {
    position: relative;
    background: transparent;
    /* как “под таблицей” */
    border: 0;
    border-radius: 0;
    margin-top: 10px;
    /* визуальный разрыв от рамки таблицы */
}

/* убираем псевдо-рамку пейджера (чтобы не выглядело, будто он внутри общей рамки) */
#pp-root #ppPromoPager::before {
    content: none;
}


/* Когда открыта правая инфо-панель (класс info-open висит на #ppPromoLiveops),
   пейджер должен "съезжать" и оставаться закреплённым под таблицей, как в LiveOps.
   В DOM #ppPromoPager — соседний блок после #ppPromoLiveops. */
#ppPromoLiveops.info-open+#ppPromoPager,
#ppPromoLiveops.info-open~#ppPromoPager {
    margin-right: calc(var(--pp-detail-w) + var(--pp-gap));
}

/* чуть более приятное движение (в LiveOps панель тоже анимируется) */
#ppPromoPager {
    transition: margin-right .18s ease;
}



/* [HOURS-RULER POINTER PROMO] — линейка часов в Promotions всегда "pointer" */
#ppPromoCal .tl-grid-header,
#ppPromoCal .tl-grid-header .tl-col,
#ppPromoCal .pp-cal-scale,
#ppPromoCal .pp-cal-tick {
    cursor: pointer !important;
}


/* ещё одна страховка: сами элементы picked поверх всего внутри header */
#ppPromoCal .pp-picked-badge {
    z-index: 70 !important;
}

#ppPromoCal .pp-picked-btn {
    z-index: 71 !important;
}

/* тело грида оставляем ниже шапки */
#ppPromoCal .tl-grid-body {
    position: relative;
    z-index: 1;
}

/* ===== Promotions table: filter funnel icon like LiveOps ===== */
#pp-root .pp-th-btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;

    /* как в LiveOps header */
    font-weight: 700;
}

/* ===== Promotions Type filter — match LiveOps Type popup ===== */
#pp-root #ppPromoTypePop {
    min-width: 350px;
    padding: 14px;
}

#pp-root #ppPromoTypePop .pp-inp {
    width: 100%;
    padding: 6px 8px;
    border-radius: 6px !important;
    margin-bottom: 8px;
    border: 1px solid var(--border);
    background: var(--btn-n-field-bg);
    color: var(--text);
    outline: none;
}

#pp-root #ppPromoTypePop .pp-type-list {
    display: grid;
    gap: 8px;
    max-height: 180px;
    overflow: auto;
    padding-right: 4px;
}

#pp-root #ppPromoTypePop .pp-type-opt {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--text);
}

#pp-root #ppPromoTypePop .pp-type-opt input {
    accent-color: var(--accent);
}




#pp-root .pp-th-btn .pp-filter-ico {
    width: 14px;
    height: 14px;
    display: inline-block;
    background: currentColor;
    opacity: .65;
    cursor: pointer;

    -webkit-mask: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M3 5h18l-7 8v6l-4 2v-8L3 5z'/></svg>") no-repeat center / contain;
    mask: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M3 5h18l-7 8v6l-4 2v-8L3 5z'/></svg>") no-repeat center / contain;
}

#pp-root .pp-th-btn .pp-filter-ico:hover {
    opacity: 1;
}

/* ===== Promotions pager: sync with LiveOps (grey range text + centered layout) ===== */
/* ===== Promotions pager: EXACT layout like LiveOps pager (.pp-pager) ===== */

/* сам контейнер пейджера — как в LiveOps:
   - элементы “собраны” справа
   - Reset уезжает влево через margin-right:auto
   - нет растягивания на всю ширину (как на твоём красном примере) */
#pp-root #ppPromoPager {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    /* правая группа прижата вправо */
    gap: 18px;

    margin-top: 10px;
    padding: 10px 12px;

    border-top: 0;
    background: var(--card-bg);
    box-shadow: inset 0 0.1px 0 var(--border-2);
}

/* Reset — слева */
#pp-root #ppPromoResetBtn {
    margin-right: auto;
    order: 0;
}

/* Rows per page (label + select) — рядом, справа от reset */
#pp-root #ppPromoPager .pp-label,
#pp-root #ppPromoPager .pp-sel-wrap {
    order: 1;
}

/* range — фиксированной ширины, НЕ растягиваем flex’ом */
#pp-root #ppPromoPager #ppPromoRange {
    order: 2;

    min-width: 120px;
    text-align: center;

    color: var(--muted-ink, #546e7a);
    font-weight: 400;
    font-variant-numeric: tabular-nums;

    flex: 0 0 auto;
    /* <-- ключ: убираем растяжку на всю ширину */
}

/* навигация — справа */
#pp-root #ppPromoPager .pp-nav {
    order: 3;
}


/* ===== Promotions: Reset Filters button = exactly like LiveOps (#ppResetBtn) ===== */
#pp-root #ppPromoResetBtn {
    width: 20%;
    max-width: 180px;
    min-width: 120px;
    text-align: center;
    border-radius: 4px;
    padding: 8px 12px;
    line-height: 1;
    cursor: pointer;
    box-shadow: none;

    /* делаем вид "синей кнопки" как в таблице */
    border: 1px solid #f59e0b !important;
    background: #f59e0b !important;
    color: var(--btn-n-field-bg) !important;

}

#pp-root #ppPromoResetBtn:hover {
    opacity: 0.75;
}

/* Dark theme: как у LiveOps reset/admin — светло-голубая с чёрным текстом */
:root.theme-dark #ppPromoResetBtn,
.theme-dark #ppPromoResetBtn,
[data-theme="dark"] #ppPromoResetBtn,
.dark #ppPromoResetBtn {
    background: var(--accent) !important;
    color: #0f172a !important;
    border: none;
}



/* IMPORTANT:
   Не трогаем глобально .pp-v (это ломает grid-раскладку k/v в detail панели),
   а применяем flex-раскладку только к Name-строке, как в LiveOps. */
#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-kv-name .pp-v {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    flex-wrap: wrap;
    /* если мало места — кнопка может уйти на следующую строку */
    min-width: 0;
    overflow: visible;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-kv-name .pp-name-text {
    flex: 1 1 auto;
    min-width: 0;
}

/* --- [FIX] Promotions open-state (у промо нет .pp-item, поэтому .pp-item.info-open не срабатывает) --- */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail {
    padding: 0 16px 16px 9px;
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kvs {
    padding-right: 16px;
}

/* ===== Raw details (collapsible) + copy button only when open ===== */
#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-raw-details {
    border: 1px solid var(--border, #d1d5db);
    border-radius: 12px;
    padding: 8px 10px;
    background: rgba(0, 0, 0, 0.02);
}

:root.theme-dark #pp-root #ppPromoLoDetail.pp-liveops-detail .pp-raw-details,
.theme-dark #pp-root #ppPromoLoDetail.pp-liveops-detail .pp-raw-details,
[data-theme="dark"] #pp-root #ppPromoLoDetail.pp-liveops-detail .pp-raw-details,
.dark #pp-root #ppPromoLoDetail.pp-liveops-detail .pp-raw-details {
    background: rgba(255, 255, 255, 0.04);
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-raw-sum {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
    cursor: pointer;
    user-select: none;
}

/* --- Raw JSON summary should look like a link, with a chevron --- */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-raw-sum {
    padding: 0;
    background: transparent;
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-raw-title {
    display: inline-flex;
    align-items: center;
    gap: 6px;
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-raw-chevron {
    display: inline-block;
    transition: transform .12s ease;
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-raw-details[open] .pp-raw-chevron {
    transform: rotate(90deg);
}


#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-raw-title {
    font-weight: 900;
    color: var(--muted, #6b7280);
}

/* hide copy button until details is open */
#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-raw-details:not([open]) .pp-raw-copy {
    display: none !important;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-raw {
    margin-top: 25px;
    max-width: 100%;
    white-space: pre-wrap;
    overflow-wrap: anywhere;
    word-break: break-word;
}

/* --- External segment toggle (no border “button”, like LiveOps) --- */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-extseg {
    margin-top: 6px;
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-extseg-sum {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    cursor: pointer;
    user-select: none;
    padding: 0;
    border: 0;
    background: transparent;
    color: var(--muted, #6b7280);
    font-weight: 800;
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-extseg-sum:hover {
    text-decoration: underline;
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-extseg-val {
    margin-top: 6px;
}

/* --- Offers: stack Rewards label above values (prevents ugly narrow wrapping) --- */
#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-offer-row.pp-offer-row-rews {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-offer-row.pp-offer-row-rews .pp-offer-k {
    margin: 0;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-offer-row.pp-offer-row-rews .pp-offer-v {
    padding-left: 0;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-rew-main {
    overflow: hidden;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-rew-main code {
    max-width: 100%;
}

/* [FORCE] Show Promotions in Admin button when info panel is open */
#ppPromoLiveops.info-open #ppPromoAdminBtn {
    display: inline-flex !important;
}

/* ===== Rewards: bullets + nested “Type” under reward ===== */
#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-rew-main {
    display: flex;
    gap: 8px;
    align-items: flex-start;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-rew-bullet {
    width: 14px;
    flex: 0 0 14px;
    line-height: 1.2;
    transform: translateY(2px);
    opacity: .9;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-rew-content {
    min-width: 0;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-rew-line {
    min-width: 0;
    white-space: normal;
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-rew-meta {
    margin-top: 2px;
    /* ближе к реварду сверху */
}

#pp-root #ppPromoLoDetail.pp-liveops-detail .pp-rew-meta-v {
    white-space: normal;
    overflow-wrap: anywhere;
    word-break: break-word;
}

/* =========================
   Raw JSON (PROMOS): "floating" toggle like Offers + full width block
   ========================= */

/* ===== Raw JSON (PROMOS) — no "Raw JSON" label, centered floating toggle, tighter bottom gap ===== */

/* 0) KV becomes 1-column, no left label space */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-raw.pp-kv-raw-only {
    grid-template-columns: 1fr;
    align-items: start;
}

/* value spans full width */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-raw.pp-kv-raw-only .pp-v {
    grid-column: 1 / -1;
    width: 100%;
    min-width: 0;
    margin-top: 0;
}

/* 1) Center the floating toggle row (summary) */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-raw.pp-kv-raw-only .pp-raw-sum {
    justify-content: center;
}

/* 2) Keep copy icon on the right, without shifting the centered title */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-raw.pp-kv-raw-only .pp-raw-details {
    position: relative;
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-raw.pp-kv-raw-only .pp-raw-copy {
    position: absolute;
    right: 38px;
    top: 3px;
}

/* 3) Smaller gap between Raw toggle and the blue admin button */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-raw.pp-kv-raw-only {
    margin-bottom: 6px;
}

/* the content padding under the KV list — make it smaller (and still safe) */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kvs {
    padding-bottom: 18px !important;
}


/* [FIX] Safe space under the floating Admin button:
   so the last lines don't touch the button border */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kvs {
    padding-bottom: calc(var(--pp-admin-h) + 24px) !important;
}


/* 2) Делаем Raw JSON value (details) на всю ширину инфопанели */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-raw .pp-v {
    grid-column: 1 / -1;
    display: block;
    width: 100%;
    min-width: 0;
    margin-top: 6px;
}

/* 3) Сам <details> не должен выглядеть как кнопка (убираем обводку/фон) */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-raw .pp-raw-details {
    border: 0 !important;
    background: transparent !important;
    padding: 0 !important;
    border-radius: 0 !important;
}

/* 4) Summary — как “висячая” строка (как Offer #1/#2) */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-raw .pp-raw-sum {
    padding: 0;
    background: transparent;
    cursor: pointer;
    user-select: none;
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-raw .pp-raw-title {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    font-weight: 800;
    color: var(--text);
}

/* треугольник стоит ПОСЛЕ текста, и поворачивается при open */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-raw .pp-raw-chevron {
    font-size: 22px;
    opacity: .8;
    transform: translateY(1px);
    transition: transform .12s ease;
}

#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-raw .pp-raw-details[open] .pp-raw-chevron {
    transform: translateY(1px) rotate(90deg);
}

/* 5) Сам JSON (pre) делаем “карточкой” и full width */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-raw pre.pp-raw {
    width: 100%;
    min-width: 0;

    border: 1px solid var(--border, #d1d5db);
    border-radius: 12px;
    padding: 10px 10px;

    background: rgba(0, 0, 0, 0.02);
}

/* dark theme for the raw block */
:root.theme-dark #ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-raw pre.pp-raw,
.theme-dark #ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-raw pre.pp-raw,
[data-theme="dark"] #ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-raw pre.pp-raw,
.dark #ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kv.pp-kv-raw pre.pp-raw {
    background: rgba(255, 255, 255, 0.04);
}

/* [PROMOS][LIGHT] Fix: делаем фон инфопанели полностью solid (без прозрачности) */
#ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail {
    background: var(--card) !important;
    opacity: 1 !important;
}


/* [PROMOS][DARK] Fix: убираем прозрачность подложки инфопанели (делаем фон полностью “solid”) */
:root.theme-dark #ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail,
.theme-dark #ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail,
[data-theme="dark"] #ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail,
.dark #ppPromoLiveops.info-open #ppPromoLoDetail.pp-liveops-detail {
    background: var(--pp-dark-bg, var(--card-bg, #1c2136)) !important;
}

/* --- [UI] Floating close button: keep fully visible and clickable --- */
#ppPromoLiveops #ppPromoLoClose.pp-close-float {
    position: absolute;
    top: 10px;
    right: 0px;

    /* ProfileParser.css задаёт .pp-close-float { display:none; } — override только в открытом состоянии */
    display: none !important;

    z-index: 1215;
    width: 30px;
    height: 30px;
    border-radius: 10px;
    font-size: 22px;
    line-height: 24px;
    align-items: center;
    justify-content: center;
}

/* показываем кнопку закрытия только когда открыта инфопанель (как в LiveOps) */
#pp-root .pp-item.info-open #ppPromoLoClose.pp-close-float {
    display: inline-flex !important;
}


/* --- [PROMOS] Split layout + solid info panel background (match LiveOps) --- */

/* гарантируем правильный контекст позиционирования для aside + кнопок */
#pp-root #ppPromoLiveops {
    position: relative;
    overflow: visible;
}

/* Floating Admin button: same behavior as LiveOps (.pp-admin-float) */
#ppPromoLiveops #ppPromoAdminBtn.pp-admin-float {
    position: absolute;
    right: 11px;
    bottom: 0px;
    z-index: 1210;
    display: none;
    width: calc(var(--pp-detail-w) - 16px);
    height: var(--pp-admin-h);
    align-items: center;
    justify-content: center;
}

/* показываем кнопку только когда инфопанель открыта */
#pp-root .pp-item.info-open #ppPromoAdminBtn.pp-admin-float {
    display: inline-flex !important;
}

/* Promotions detail panel: make it reach the very bottom (behind the Admin button)
   + remove any "transparent" look in dark theme by forcing a solid background. */
#pp-root .pp-item.info-open #ppPromoLoDetail.pp-liveops-detail {
    bottom: 0;
    background: var(--pp-table-inner-bg, var(--card-bg));
    /* иногда визуально кажется прозрачной из-за наложений — прижимаем к fully-opaque */
    opacity: 1;
}

/* чтобы контент не заезжал под кнопку */
#pp-root .pp-item.info-open #ppPromoLoDetail.pp-liveops-detail .pp-kvs {
    padding-bottom: calc(var(--pp-admin-h) + 24px);
}

/* принудительно переносим длинные пути/значения */
#pp-root .pp-item.info-open #ppPromoLoDetail.pp-liveops-detail .pp-v,
#pp-root .pp-item.info-open #ppPromoLoDetail.pp-liveops-detail code,
#pp-root .pp-item.info-open #ppPromoLoDetail.pp-liveops-detail pre {
    overflow-wrap: anywhere;
    word-break: break-word;
}

#ppPromoResetBtn {
    border: 1px solid #f59e0b !important;
    background: #f59e0b !important;

    /* LIGHT theme: белый текст (фиксируем жёстко) */
    color: #ffffff !important;
}

#ppPromoResetBtn:hover {
    filter: brightness(0.98);
    opacity: 0.95;
}

:root.theme-dark #ppPromoResetBtn,
.theme-dark #ppPromoResetBtn,
[data-theme="dark"] #ppPromoResetBtn,
.dark #ppPromoResetBtn {
    color: #0b1120 !important;
    border: 1px solid #f59e0b !important;
    background: #f59e0b !important;
}